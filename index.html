<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KFC ÌÇ§Ïò§Ïä§ÌÅ¨ - 2026 ÎØ∏ÎûòÌòï Ï£ºÎ¨∏ ÏãúÏä§ÌÖú</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700;900&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans KR', 'Pretendard', sans-serif;
            background: #FFFFFF;
            color: #000000;
            width: 1920px;
            height: 1080px;
            overflow: hidden;
            position: relative;
            margin: 0;
            padding: 0;
        }

        .screen {
            width: 100%;
            height: 100%;
            display: none;
            flex-direction: column;
            position: absolute;
            top: 0;
            left: 0;
            overflow: hidden;
        }

        .screen.active {
            display: flex;
        }

        .container {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* Header */
        .header {
            background: #C8102E;
            color: #FFFFFF;
            padding: 20px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 80px;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            width: 100%;
            z-index: 1000;
            flex-shrink: 0;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .logo {
            font-size: 32px;
            font-weight: 900;
            letter-spacing: 2px;
        }

        .header-info {
            display: flex;
            gap: 30px;
            font-size: 18px;
            font-weight: 500;
        }

        .cart-icon {
            cursor: pointer;
            position: relative;
        }

        .cart-count {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #FFCC00;
            color: #000000;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: 700;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            display: flex;
            overflow: hidden;
            min-height: 0;
            margin-top: 80px;
            height: calc(100% - 80px);
        }

        /* Left Sidebar - Categories */
        .sidebar {
            width: 250px;
            background: #F5F5F5;
            padding: 30px 0;
            overflow-y: auto;
            flex-shrink: 0;
        }

        .category-item {
            padding: 20px 30px;
            cursor: pointer;
            font-size: 18px;
            font-weight: 500;
            transition: all 0.18s ease;
            border-left: 4px solid transparent;
        }

        .category-item:hover,
        .category-item.active {
            background: #FFFFFF;
            border-left-color: #C8102E;
            color: #C8102E;
        }

        /* Center - Menu Grid */
        .menu-section {
            flex: 1;
            padding: 40px;
            overflow-y: auto;
            min-width: 0;
            min-height: 0;
        }

        .section-title {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 30px;
            color: #000000;
        }

        .menu-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 30px;
        }

        .menu-item {
            background: #FFFFFF;
            border: 2px solid #E5E5E5;
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.18s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        .menu-item:hover {
            border-color: #C8102E;
            transform: translateY(-5px);
            box-shadow: 0 4px 12px rgba(200, 16, 46, 0.2);
        }

        .menu-image {
            width: 200px;
            height: 200px;
            background: linear-gradient(135deg, #FFCC00, #FF9900);
            border-radius: 8px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 60px;
            color: #FFFFFF;
        }

        .menu-name {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 10px;
            color: #000000;
        }

        .menu-desc {
            font-size: 14px;
            color: #666666;
            margin-bottom: 15px;
            min-height: 40px;
        }

        .menu-price {
            font-size: 24px;
            font-weight: 700;
            color: #C8102E;
            margin-bottom: 15px;
        }

        .btn-add {
            width: 100%;
            padding: 12px;
            background: #C8102E;
            color: #FFFFFF;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.18s ease;
        }

        .btn-add:hover {
            background: #FFFFFF;
            color: #C8102E;
            border: 2px solid #C8102E;
        }

        /* Right Sidebar - Cart & Options */
        .right-sidebar {
            width: 400px;
            background: #F9F9F9;
            padding: 30px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            flex-shrink: 0;
            min-height: 0;
        }

        .cart-section {
            margin-bottom: 30px;
        }

        .cart-title {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 20px;
            color: #000000;
        }

        .cart-items {
            margin-bottom: 20px;
        }

        .cart-item {
            background: #FFFFFF;
            border: 1px solid #E5E5E5;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .cart-item-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .cart-item-name {
            font-size: 16px;
            font-weight: 700;
            color: #000000;
        }

        .cart-item-remove {
            background: none;
            border: none;
            color: #C8102E;
            cursor: pointer;
            font-size: 18px;
            padding: 0 5px;
        }

        .cart-item-options {
            font-size: 14px;
            color: #666666;
            margin-bottom: 10px;
        }

        .cart-item-request {
            font-size: 13px;
            color: #C8102E;
            font-style: italic;
            margin-bottom: 10px;
            padding: 8px;
            background: #FFF5F5;
            border-radius: 4px;
        }

        .cart-item-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .quantity-controls {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .btn-quantity {
            width: 30px;
            height: 30px;
            border: 2px solid #C8102E;
            background: #FFFFFF;
            color: #C8102E;
            border-radius: 6px;
            cursor: pointer;
            font-size: 18px;
            font-weight: 700;
            transition: all 0.18s ease;
        }

        .btn-quantity:hover {
            background: #C8102E;
            color: #FFFFFF;
        }

        .quantity {
            font-size: 16px;
            font-weight: 700;
            min-width: 30px;
            text-align: center;
        }

        .cart-item-price {
            font-size: 18px;
            font-weight: 700;
            color: #C8102E;
        }

        .custom-request-section {
            margin-bottom: 30px;
        }

        .request-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 15px;
            color: #000000;
        }

        .request-input-group {
            margin-bottom: 15px;
        }

        .request-label {
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 8px;
            display: block;
            color: #000000;
        }

        .request-input {
            width: 100%;
            padding: 12px;
            border: 2px solid #E5E5E5;
            border-radius: 8px;
            font-size: 14px;
            font-family: 'Noto Sans KR', sans-serif;
            transition: all 0.18s ease;
        }

        .request-input:focus {
            outline: none;
            border-color: #C8102E;
        }

        .voice-btn {
            width: 100%;
            padding: 12px;
            background: #C8102E;
            color: #FFFFFF;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.18s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .voice-btn:hover {
            background: #FFFFFF;
            color: #C8102E;
            border: 2px solid #C8102E;
        }

        .voice-btn.recording {
            background: #FFCC00;
            color: #000000;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .request-examples {
            font-size: 12px;
            color: #666666;
            margin-top: 8px;
        }

        /* Discount Section */
        .discount-section {
            margin-bottom: 30px;
        }

        .discount-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 15px;
            color: #000000;
        }

        .discount-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .discount-option {
            padding: 12px;
            background: #FFFFFF;
            border: 2px solid #E5E5E5;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.18s ease;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .discount-option:hover {
            border-color: #C8102E;
        }

        .discount-option.selected {
            background: #C8102E;
            color: #FFFFFF;
            border-color: #C8102E;
        }

        .discount-info {
            display: flex;
            flex-direction: column;
        }

        .discount-name {
            font-size: 14px;
            font-weight: 700;
        }

        .discount-desc {
            font-size: 12px;
            margin-top: 4px;
        }

        .discount-amount {
            font-size: 16px;
            font-weight: 700;
            color: #FFCC00;
        }

        .discount-option.selected .discount-amount {
            color: #FFCC00;
        }

        /* Total & Checkout */
        .cart-total {
            margin-top: auto;
            padding-top: 20px;
            border-top: 2px solid #E5E5E5;
        }

        .total-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .total-row.total {
            font-size: 24px;
            font-weight: 700;
            color: #C8102E;
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid #E5E5E5;
        }

        .btn-checkout {
            width: 100%;
            padding: 18px;
            background: #C8102E;
            color: #FFFFFF;
            border: none;
            border-radius: 8px;
            font-size: 20px;
            font-weight: 700;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.18s ease;
        }

        .btn-checkout:hover {
            background: #FFFFFF;
            color: #C8102E;
            border: 2px solid #C8102E;
        }

        .btn-checkout:disabled {
            background: #CCCCCC;
            color: #666666;
            cursor: not-allowed;
        }

        /* Modal - Menu Detail */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: #FFFFFF;
            border-radius: 12px;
            padding: 40px;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }

        .modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            font-size: 32px;
            cursor: pointer;
            color: #666666;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-close:hover {
            color: #C8102E;
        }

        .modal-image {
            width: 300px;
            height: 300px;
            background: linear-gradient(135deg, #FFCC00, #FF9900);
            border-radius: 8px;
            margin: 0 auto 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 80px;
            color: #FFFFFF;
        }

        .modal-title {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 20px;
            text-align: center;
            color: #000000;
        }

        .modal-price {
            font-size: 36px;
            font-weight: 700;
            color: #C8102E;
            text-align: center;
            margin-bottom: 30px;
        }

        .modal-section {
            margin-bottom: 30px;
        }

        .modal-section-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 15px;
            color: #000000;
            border-bottom: 2px solid #C8102E;
            padding-bottom: 10px;
        }

        .modal-section-content {
            font-size: 16px;
            line-height: 1.8;
            color: #333333;
        }

        .nutrition-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 15px;
        }

        .nutrition-item {
            background: #F5F5F5;
            padding: 15px;
            border-radius: 8px;
        }

        .nutrition-label {
            font-size: 14px;
            color: #666666;
            margin-bottom: 5px;
        }

        .nutrition-value {
            font-size: 18px;
            font-weight: 700;
            color: #000000;
        }

        .allergy-list {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }

        .allergy-tag {
            background: #FFF5F5;
            color: #C8102E;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 500;
        }

        .modal-actions {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }

        .btn-modal {
            flex: 1;
            padding: 15px;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.18s ease;
        }

        .btn-modal-primary {
            background: #C8102E;
            color: #FFFFFF;
        }

        .btn-modal-primary:hover {
            background: #FFFFFF;
            color: #C8102E;
            border: 2px solid #C8102E;
        }

        .btn-modal-secondary {
            background: #FFFFFF;
            color: #C8102E;
            border: 2px solid #C8102E;
        }

        .btn-modal-secondary:hover {
            background: #C8102E;
            color: #FFFFFF;
        }

        /* Empty States */
        .empty-cart {
            text-align: center;
            padding: 40px 20px;
            color: #666666;
        }

        .empty-cart-icon {
            font-size: 60px;
            margin-bottom: 20px;
        }

        .empty-cart-text {
            font-size: 18px;
        }

        /* Notification */
        .notification {
            position: fixed;
            top: 100px;
            right: 30px;
            background: #C8102E;
            color: #FFFFFF;
            padding: 20px 30px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 500;
            z-index: 2000;
            display: none;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        .notification.active {
            display: block;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: #F5F5F5;
        }

        ::-webkit-scrollbar-thumb {
            background: #C8102E;
            border-radius: 5px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #A00D25;
        }

        /* Home Screen */
        .home-screen {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: #FFFFFF;
            color: #000000;
            text-align: center;
            padding: 60px 40px;
            box-sizing: border-box;
            overflow-y: auto;
            position: relative;
        }

        .home-screen::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #C8102E 0%, #FFCC00 100%);
        }

        .home-logo {
            font-size: 80px;
            font-weight: 900;
            margin: 0 0 25px 0;
            letter-spacing: 4px;
            color: #C8102E;
        }

        .home-subtitle {
            font-size: 22px;
            font-weight: 600;
            margin: 0 0 50px 0;
            color: #444444;
            letter-spacing: 2px;
            text-transform: uppercase;
        }

        .home-description {
            font-size: 24px;
            margin: 0 0 70px 0;
            max-width: 700px;
            line-height: 1.8;
            color: #222222;
            font-weight: 400;
        }

        .home-features {
            display: flex;
            gap: 30px;
            margin: 0 0 50px 0;
            max-width: 900px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .home-feature {
            background: #FFFFFF;
            padding: 30px 25px;
            border-radius: 12px;
            flex: 1;
            min-width: 200px;
            max-width: 280px;
            border: 2px solid #E5E5E5;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        .home-feature:hover {
            border-color: #C8102E;
            transform: translateY(-3px);
            box-shadow: 0 4px 16px rgba(200, 16, 46, 0.15);
        }

        .home-feature-icon {
            font-size: 36px;
            margin-bottom: 15px;
            opacity: 1;
        }

        .home-feature-title {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 10px;
            color: #000000;
        }

        .home-feature-desc {
            font-size: 14px;
            color: #555555;
            line-height: 1.6;
        }

        .btn-home {
            padding: 22px 70px;
            background: #C8102E;
            color: #FFFFFF;
            border: none;
            border-radius: 10px;
            font-size: 22px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.18s ease;
            letter-spacing: 1px;
            margin: 0;
            box-shadow: 0 4px 12px rgba(200, 16, 46, 0.25);
        }

        .btn-home:hover {
            background: #A00D25;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(200, 16, 46, 0.3);
        }

        .btn-home:active {
            transform: translateY(0);
        }

        /* Order Type Selection */
        .order-type-selection {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-bottom: 50px;
            max-width: 600px;
            width: 100%;
        }

        .order-type-btn {
            padding: 35px 50px;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.18s ease;
            font-size: 28px;
            font-weight: 700;
            text-align: center;
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .order-type-btn[data-type="takeout"] {
            background: #C8102E;
            color: #FFFFFF;
        }

        .order-type-btn[data-type="dinein"] {
            background: #C8102E;
            color: #FFFFFF;
        }

        .order-type-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        .order-type-btn.selected {
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
        }

        .order-type-check {
            position: absolute;
            right: 20px;
            width: 24px;
            height: 24px;
            background: #555555;
            border-radius: 50%;
            opacity: 0;
            transition: opacity 0.18s ease;
        }

        .order-type-btn.selected .order-type-check {
            opacity: 1;
        }

        .order-type-btn[data-type="dinein"] .order-type-check {
            background: #FFFFFF;
        }

        .btn-back-home {
            padding: 12px 24px;
            background: #FFFFFF;
            color: #C8102E;
            border: 2px solid #C8102E;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.18s ease;
            margin-left: 20px;
        }

        .btn-back-home:hover {
            background: #C8102E;
            color: #FFFFFF;
        }

        /* Receipt Screen */
        .receipt-screen {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            background: #F5F5F5;
            padding: 40px 60px;
            box-sizing: border-box;
            overflow-y: auto;
            overflow-x: hidden;
        }

        .receipt-container {
            background: #FFFFFF;
            width: 100%;
            max-width: 800px;
            padding: 50px;
            border-radius: 12px;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
            position: relative;
            margin: 40px auto;
            min-height: auto;
        }

        .receipt-header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 30px;
            border-bottom: 3px solid #C8102E;
        }

        .receipt-logo {
            font-size: 48px;
            font-weight: 900;
            color: #C8102E;
            margin-bottom: 10px;
            letter-spacing: 4px;
        }

        .receipt-title {
            font-size: 32px;
            font-weight: 700;
            color: #000000;
            margin-bottom: 10px;
        }

        .receipt-subtitle {
            font-size: 18px;
            color: #666666;
            margin-bottom: 20px;
        }

        .receipt-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
            font-size: 14px;
            color: #666666;
        }

        .receipt-info-item {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .receipt-info-label {
            font-weight: 700;
            color: #000000;
        }

        .receipt-items {
            margin-bottom: 30px;
        }

        .receipt-item {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            padding: 20px 0;
            border-bottom: 1px solid #E5E5E5;
        }

        .receipt-item:last-child {
            border-bottom: none;
        }

        .receipt-item-info {
            flex: 1;
        }

        .receipt-item-name {
            font-size: 20px;
            font-weight: 700;
            color: #000000;
            margin-bottom: 8px;
        }

        .receipt-item-details {
            font-size: 14px;
            color: #666666;
            margin-bottom: 5px;
        }

        .receipt-item-request {
            font-size: 14px;
            color: #C8102E;
            font-style: italic;
            margin-top: 5px;
            padding: 5px 10px;
            background: #FFF5F5;
            border-radius: 4px;
            display: inline-block;
        }

        .receipt-item-price {
            font-size: 20px;
            font-weight: 700;
            color: #C8102E;
            min-width: 120px;
            text-align: right;
        }

        .receipt-divider {
            height: 2px;
            background: #E5E5E5;
            margin: 30px 0;
        }

        .receipt-summary {
            margin-bottom: 30px;
        }

        .receipt-summary-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            font-size: 18px;
        }

        .receipt-summary-label {
            color: #666666;
        }

        .receipt-summary-value {
            font-weight: 700;
            color: #000000;
        }

        .receipt-summary-row.discount {
            color: #C8102E;
        }

        .receipt-summary-row.total {
            font-size: 28px;
            padding-top: 20px;
            border-top: 2px solid #C8102E;
            margin-top: 10px;
        }

        .receipt-summary-row.total .receipt-summary-label {
            color: #C8102E;
            font-weight: 700;
        }

        .receipt-summary-row.total .receipt-summary-value {
            color: #C8102E;
            font-size: 32px;
        }

        .receipt-footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 30px;
            padding-bottom: 20px;
            border-top: 2px dashed #E5E5E5;
        }

        .receipt-footer-message {
            font-size: 16px;
            color: #666666;
            line-height: 1.8;
            margin-bottom: 20px;
        }

        .receipt-footer-note {
            font-size: 14px;
            color: #999999;
            margin-top: 20px;
            margin-bottom: 20px;
        }

        .btn-receipt {
            padding: 18px 60px;
            background: #C8102E;
            color: #FFFFFF;
            border: none;
            border-radius: 8px;
            font-size: 20px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.18s ease;
            margin-top: 30px;
            margin-bottom: 20px;
        }

        .btn-receipt:hover {
            background: #FFFFFF;
            color: #C8102E;
            border: 2px solid #C8102E;
        }

        .receipt-print-line {
            display: none;
        }

        @media print {
            .receipt-container {
                box-shadow: none;
                max-width: 100%;
            }
            .btn-receipt {
                display: none;
            }
        }

        /* Payment Method Selection Modal */
        .payment-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #F5F5F5;
            z-index: 2000;
            align-items: center;
            justify-content: center;
            padding: 40px;
            box-sizing: border-box;
        }

        .payment-modal.active {
            display: flex;
        }

        .payment-modal-content {
            background: #FFFFFF;
            border-radius: 16px;
            padding: 50px;
            max-width: 600px;
            width: 100%;
            position: relative;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
        }

        .payment-modal-title {
            font-size: 32px;
            font-weight: 700;
            color: #000000;
            margin-bottom: 15px;
            text-align: center;
        }

        .payment-modal-subtitle {
            font-size: 18px;
            color: #666666;
            margin-bottom: 40px;
            text-align: center;
        }

        .payment-modal-total {
            font-size: 24px;
            font-weight: 700;
            color: #C8102E;
            text-align: center;
            margin-bottom: 40px;
            padding: 20px;
            background: #FFF5F5;
            border-radius: 8px;
        }

        .payment-methods-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 30px;
        }

        .payment-method-item {
            padding: 25px 30px;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.18s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            font-size: 20px;
            font-weight: 600;
            color: #000000;
            min-height: 70px;
        }

        .payment-method-item[data-payment="kakaopay"] {
            background: #FEE500;
            color: #000000;
        }

        .payment-method-item[data-payment="naverpay"] {
            background: #03C75A;
            color: #000000;
        }

        .payment-method-item[data-payment="card"] {
            background: #333333;
            color: #FFFFFF;
        }

        .payment-method-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        .payment-method-item.selected {
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
        }

        .payment-method-name {
            font-size: 20px;
            font-weight: 600;
            text-align: center;
        }

        .payment-method-check {
            position: absolute;
            right: 20px;
            width: 24px;
            height: 24px;
            background: #555555;
            border-radius: 50%;
            opacity: 0;
            transition: opacity 0.18s ease;
        }

        .payment-method-item.selected .payment-method-check {
            opacity: 1;
        }

        .payment-modal-info {
            font-size: 14px;
            color: #666666;
            line-height: 1.6;
            margin-bottom: 30px;
            text-align: left;
        }

        /* Phone Verification */
        .phone-verification-section {
            margin-bottom: 30px;
            padding: 25px;
            background: #F9F9F9;
            border-radius: 12px;
            border: 2px solid #E5E5E5;
        }

        .phone-verification-title {
            font-size: 18px;
            font-weight: 700;
            color: #000000;
            margin-bottom: 20px;
        }

        .phone-input-group {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .phone-input {
            flex: 1;
            padding: 15px;
            border: 2px solid #E5E5E5;
            border-radius: 8px;
            font-size: 16px;
            font-family: 'Noto Sans KR', sans-serif;
            transition: all 0.18s ease;
        }

        .phone-input:focus {
            outline: none;
            border-color: #C8102E;
        }

        .btn-send-code {
            padding: 15px 25px;
            background: #C8102E;
            color: #FFFFFF;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.18s ease;
            white-space: nowrap;
        }

        .btn-send-code:hover {
            background: #A00D25;
        }

        .btn-send-code:disabled {
            background: #CCCCCC;
            color: #666666;
            cursor: not-allowed;
        }

        .verification-code-group {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .verification-code-input {
            flex: 1;
            padding: 15px;
            border: 2px solid #E5E5E5;
            border-radius: 8px;
            font-size: 16px;
            font-family: 'Noto Sans KR', sans-serif;
            text-align: center;
            letter-spacing: 4px;
            transition: all 0.18s ease;
        }

        .verification-code-input:focus {
            outline: none;
            border-color: #C8102E;
        }

        .verification-code-input:disabled {
            background: #F5F5F5;
            color: #999999;
        }

        .verification-status {
            font-size: 14px;
            margin-top: 10px;
            padding: 10px;
            border-radius: 6px;
            text-align: center;
        }

        .verification-status.success {
            background: #E8F5E9;
            color: #2E7D32;
        }

        .verification-status.error {
            background: #FFEBEE;
            color: #C62828;
        }

        .verification-status.pending {
            background: #FFF3E0;
            color: #E65100;
        }

        .verification-status.sending {
            background: #E3F2FD;
            color: #1976D2;
        }

        .btn-send-code.sending {
            opacity: 0.7;
            cursor: wait;
        }

        .verification-timer {
            font-size: 14px;
            color: #666666;
            margin-top: 10px;
            text-align: center;
        }

        .payment-modal-actions {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }

        .btn-payment-cancel {
            flex: 1;
            padding: 18px;
            background: #FFFFFF;
            color: #C8102E;
            border: 2px solid #C8102E;
            border-radius: 8px;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.18s ease;
        }

        .btn-payment-cancel:hover {
            background: #F5F5F5;
        }

        .btn-payment-confirm {
            flex: 1;
            padding: 18px;
            background: #C8102E;
            color: #FFFFFF;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.18s ease;
        }

        .btn-payment-confirm:hover {
            background: #A00D25;
        }

        .btn-payment-confirm:disabled {
            background: #CCCCCC;
            color: #666666;
            cursor: not-allowed;
        }
    </style>
</head>
<body>
    <!-- Home Screen -->
    <div class="screen active" id="homeScreen">
        <div class="home-screen">
            <div class="home-logo">KFC</div>
            <div class="home-subtitle">2026 Future Kiosk</div>
            <div class="home-description">
                ÏÑ∏Î∂Ä ÏöîÏ≤≠ÏÇ¨Ìï≠ÏùÑ ÏûÖÎ†•Ìï† Ïàò ÏûàÎäî<br>
                Í∞úÏù∏ÌôîÎêú Ï£ºÎ¨∏ ÏãúÏä§ÌÖúÏûÖÎãàÎã§
            </div>
            <div class="order-type-selection">
                <div class="order-type-btn" id="orderTypeTakeout" data-type="takeout" onclick="selectOrderType('takeout')">
                    Ìè¨Ïû•ÌïòÍ∏∞
                    <div class="order-type-check"></div>
                </div>
                <div class="order-type-btn" id="orderTypeDinein" data-type="dinein" onclick="selectOrderType('dinein')">
                    Îß§Ïû•ÏóêÏÑú Î®πÍ∏∞
                    <div class="order-type-check"></div>
                </div>
            </div>
            <div class="home-features">
                <div class="home-feature">
                    <div class="home-feature-icon">üé§</div>
                    <div class="home-feature-title">ÏùåÏÑ± ÏöîÏ≤≠ÏÇ¨Ìï≠</div>
                    <div class="home-feature-desc">ÏùåÏÑ±ÏúºÎ°ú Í∞ÑÌé∏ÌïòÍ≤å<br>ÏöîÏ≤≠ÏÇ¨Ìï≠ ÏûÖÎ†•</div>
                </div>
                <div class="home-feature">
                    <div class="home-feature-icon">üí∞</div>
                    <div class="home-feature-title">Ìï†Ïù∏/Ïø†Ìè∞</div>
                    <div class="home-feature-desc">Îã§ÏñëÌïú Ìï†Ïù∏ ÌòúÌÉù<br>Í∞ÑÎã®ÌïòÍ≤å Ï†ÅÏö©</div>
                </div>
                <div class="home-feature">
                    <div class="home-feature-icon">üìã</div>
                    <div class="home-feature-title">ÏÉÅÏÑ∏ Ï†ïÎ≥¥</div>
                    <div class="home-feature-desc">ÏòÅÏñëÏ†ïÎ≥¥ Î∞è<br>ÏïåÎ†àÎ•¥Í∏∞ Ï†ïÎ≥¥ ÌôïÏù∏</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Receipt Screen -->
    <div class="screen" id="receiptScreen">
        <div class="receipt-screen">
            <div class="receipt-container" id="receiptContainer">
                <!-- Receipt content will be dynamically generated -->
            </div>
        </div>
    </div>

    <!-- Order Screen -->
    <div class="screen" id="orderScreen">
        <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="logo">KFC ÌÇ§Ïò§Ïä§ÌÅ¨</div>
            <div class="header-info">
                <span>ÏöîÏ≤≠ÏÇ¨Ìï≠ÏùÑ ÏûÖÎ†•Ìï† Ïàò ÏûàÎäî Ï£ºÎ¨∏ ÏãúÏä§ÌÖúÏûÖÎãàÎã§</span>
                <button class="btn-back-home" onclick="showHomeScreen()">ÌôàÏúºÎ°ú</button>
                <div class="cart-icon" onclick="scrollToCart()">
                    <span>üõí</span>
                    <span class="cart-count" id="cartCount">0</span>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Left Sidebar - Categories -->
            <div class="sidebar" id="sidebar">
                <div class="category-item active" data-category="all">Ï†ÑÏ≤¥ Î©îÎâ¥</div>
                <div class="category-item" data-category="chicken">ÏπòÌÇ®</div>
                <div class="category-item" data-category="burger">Î≤ÑÍ±∞</div>
                <div class="category-item" data-category="set">ÏÑ∏Ìä∏</div>
                <div class="category-item" data-category="side">ÏÇ¨Ïù¥Îìú</div>
                <div class="category-item" data-category="drink">ÏùåÎ£å</div>
            </div>

            <!-- Center - Menu Grid -->
            <div class="menu-section">
                <h2 class="section-title" id="sectionTitle">Ï†ÑÏ≤¥ Î©îÎâ¥</h2>
                <div class="menu-grid" id="menuGrid">
                    <!-- Menu items will be dynamically inserted here -->
                </div>
            </div>

            <!-- Right Sidebar - Cart & Options -->
            <div class="right-sidebar">
                <!-- Cart Section -->
                <div class="cart-section">
                    <h3 class="cart-title">Ï£ºÎ¨∏ ÎÇ¥Ïó≠</h3>
                    <div class="cart-items" id="cartItems">
                        <div class="empty-cart">
                            <div class="empty-cart-icon">üõí</div>
                            <div class="empty-cart-text">Ïû•Î∞îÍµ¨ÎãàÍ∞Ä ÎπÑÏñ¥ÏûàÏäµÎãàÎã§</div>
                        </div>
                    </div>
                </div>

                <!-- Custom Request Section -->
                <div class="custom-request-section">
                    <h3 class="request-title">ÏÑ∏Î∂Ä ÏöîÏ≤≠ÏÇ¨Ìï≠</h3>
                    <div class="request-input-group">
                        <label class="request-label">ÏöîÏ≤≠ÏÇ¨Ìï≠ ÏûÖÎ†•</label>
                        <input type="text" class="request-input" id="requestInput" placeholder="Ïòà: ÏÜåÏä§ ÎπºÏ£ºÏÑ∏Ïöî, ÏñºÏùå Ï†ÅÍ≤å Ï£ºÏÑ∏Ïöî">
                        <div class="request-examples">üí° ÏòàÏãú: ÏÜåÏä§ Ï†úÏô∏, ÏñºÏùå Ï†ÅÍ≤å, ÏñëÎÖê Ï∂îÍ∞Ä Îì±</div>
                    </div>
                    <button class="voice-btn" id="voiceBtn" onclick="toggleVoiceRecognition()">
                        <span>üé§</span>
                        <span id="voiceBtnText">ÏùåÏÑ±ÏúºÎ°ú ÏûÖÎ†•ÌïòÍ∏∞</span>
                    </button>
                </div>

                <!-- Discount Section -->
                <div class="discount-section">
                    <h3 class="discount-title">Ìï†Ïù∏/Ïø†Ìè∞</h3>
                    <div class="discount-options" id="discountOptions">
                        <div class="discount-option" data-discount="none" onclick="selectDiscount('none')">
                            <div class="discount-info">
                                <div class="discount-name">Ìï†Ïù∏ ÏóÜÏùå</div>
                            </div>
                        </div>
                        <div class="discount-option" data-discount="student" onclick="selectDiscount('student')">
                            <div class="discount-info">
                                <div class="discount-name">ÌïôÏÉù Ìï†Ïù∏</div>
                                <div class="discount-desc">ÌïôÏÉùÏ¶ù Ï†úÏãú Ïãú</div>
                            </div>
                            <div class="discount-amount">10%</div>
                        </div>
                        <div class="discount-option" data-discount="coupon1" onclick="selectDiscount('coupon1')">
                            <div class="discount-info">
                                <div class="discount-name">ÌÜµÏã†ÏÇ¨ Ìï†Ïù∏</div>
                                <div class="discount-desc">ÌÜµÏã†ÏÇ¨ Í≥†Í∞ù ÌòúÌÉù</div>
                            </div>
                            <div class="discount-amount">5%</div>
                        </div>
                        <div class="discount-option" data-discount="coupon2" onclick="selectDiscount('coupon2')">
                            <div class="discount-info">
                                <div class="discount-name">ÌîÑÎ°úÎ™®ÏÖò Ïø†Ìè∞</div>
                                <div class="discount-desc">Ïù¥Î≤§Ìä∏ Ïø†Ìè∞</div>
                            </div>
                            <div class="discount-amount">3,000Ïõê</div>
                        </div>
                    </div>
                </div>

                <!-- Total & Checkout -->
                <div class="cart-total">
                    <div class="total-row">
                        <span>Ï£ºÎ¨∏ Í∏àÏï°</span>
                        <span id="subtotal">0Ïõê</span>
                    </div>
                    <div class="total-row">
                        <span>Ìï†Ïù∏ Í∏àÏï°</span>
                        <span id="discountAmount">-0Ïõê</span>
                    </div>
                    <div class="total-row total">
                        <span>Ï¥ù Í≤∞Ï†ú Í∏àÏï°</span>
                        <span id="totalAmount">0Ïõê</span>
                    </div>
                    <button class="btn-checkout" id="checkoutBtn" onclick="checkout()" disabled>
                        Ï£ºÎ¨∏ÌïòÍ∏∞
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal - Menu Detail -->
    <div class="modal" id="menuModal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal()">&times;</button>
            <div class="modal-image" id="modalImage">üçó</div>
            <h2 class="modal-title" id="modalTitle"></h2>
            <div class="modal-price" id="modalPrice"></div>
            
            <div class="modal-section">
                <div class="modal-section-title">Î©îÎâ¥ ÏÑ§Î™Ö</div>
                <div class="modal-section-content" id="modalDescription"></div>
            </div>

            <div class="modal-section">
                <div class="modal-section-title">ÏòÅÏñë Ï†ïÎ≥¥</div>
                <div class="nutrition-grid" id="modalNutrition"></div>
            </div>

            <div class="modal-section">
                <div class="modal-section-title">ÏïåÎ†àÎ•¥Í∏∞ Ïú†Î∞ú ÏÑ±Î∂Ñ</div>
                <div class="allergy-list" id="modalAllergy"></div>
            </div>

            <div class="modal-section">
                <div class="modal-section-title">Ïû¨Î£å ÏõêÏÇ∞ÏßÄ</div>
                <div class="modal-section-content" id="modalOrigin"></div>
            </div>

            <div class="modal-actions">
                <button class="btn-modal btn-modal-secondary" onclick="closeModal()">Îã´Í∏∞</button>
                <button class="btn-modal btn-modal-primary" id="modalAddBtn" onclick="addFromModal()">Ïû•Î∞îÍµ¨ÎãàÏóê Ï∂îÍ∞Ä</button>
            </div>
        </div>
    </div>

    <!-- Payment Method Selection Modal -->
    <div class="payment-modal" id="paymentModal">
        <div class="payment-modal-content">
            <div class="payment-modal-title">Í≤∞Ï†ú Î∞©Ïãù ÏÑ†ÌÉù</div>
            <div class="payment-modal-subtitle">ÏõêÌïòÏãúÎäî Í≤∞Ï†ú Î∞©ÏãùÏùÑ ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî</div>
            <div class="payment-modal-total" id="paymentModalTotal">Ï¥ù Í≤∞Ï†ú Í∏àÏï°: 0Ïõê</div>
            
            <!-- Phone Verification Section -->
            <div class="phone-verification-section">
                <div class="phone-verification-title">Ï†ÑÌôîÎ≤àÌò∏ Ïù∏Ï¶ù</div>
                <div class="phone-input-group">
                    <input type="tel" class="phone-input" id="phoneInput" placeholder="Ìú¥ÎåÄÌè∞ Î≤àÌò∏ ÏûÖÎ†• (Ïòà: 010-1234-5678)" maxlength="13">
                    <button class="btn-send-code" id="btnSendCode" onclick="sendVerificationCode()">Ïù∏Ï¶ùÎ≤àÌò∏ Ï†ÑÏÜ°</button>
                </div>
                <div class="verification-code-group">
                    <input type="text" class="verification-code-input" id="verificationCodeInput" placeholder="Ïù∏Ï¶ùÎ≤àÌò∏ 6ÏûêÎ¶¨ ÏûÖÎ†•" maxlength="6" disabled>
                </div>
                <div class="verification-status" id="verificationStatus" style="display: none;"></div>
                <div class="verification-timer" id="verificationTimer" style="display: none;"></div>
            </div>

            <div class="payment-methods-list" id="paymentMethodsList">
                <div class="payment-method-item" data-payment="kakaopay" onclick="selectPaymentMethod('kakaopay')">
                    <div class="payment-method-name">Ïπ¥Ïπ¥Ïò§ÌéòÏù¥Î°ú Í≤∞Ï†ú</div>
                    <div class="payment-method-check"></div>
                </div>
                <div class="payment-method-item" data-payment="naverpay" onclick="selectPaymentMethod('naverpay')">
                    <div class="payment-method-name">ÎÑ§Ïù¥Î≤ÑÌéòÏù¥Î°ú Í≤∞Ï†ú</div>
                    <div class="payment-method-check"></div>
                </div>
                <div class="payment-method-item" data-payment="card" onclick="selectPaymentMethod('card')">
                    <div class="payment-method-name">Ïã†Ïö©Ïπ¥Îìú Í≤∞Ï†ú</div>
                    <div class="payment-method-check"></div>
                </div>
            </div>
            <div class="payment-modal-info">
                Í≤∞Ï†ú Î≤ÑÌäºÏùÑ ÎàÑÎ•¥Î©¥ Í≤∞Ï†úÍ∞Ä ÏôÑÎ£åÎêú ÌõÑ Ï£ºÎ¨∏ ÏôÑÎ£å ÌôîÎ©¥ÏúºÎ°ú Ïù¥ÎèôÌï©ÎãàÎã§. Ïã§Ï†ú Í≤∞Ï†úÎäî Î∞úÏÉùÌïòÏßÄ ÏïäÏäµÎãàÎã§.
            </div>
            <div class="payment-modal-actions">
                <button class="btn-payment-cancel" onclick="closePaymentModal()">Ï∑®ÏÜå</button>
                <button class="btn-payment-confirm" id="btnPaymentConfirm" onclick="confirmPayment()" disabled>Í≤∞Ï†úÌïòÍ∏∞</button>
            </div>
        </div>
    </div>

    <!-- Notification -->
    <div class="notification" id="notification"></div>

    <script>
        // Menu Data
        const menuData = {
            chicken: [
                {
                    id: 'chicken1',
                    name: 'Ïò§Î¶¨ÏßÄÎÑê ÏπòÌÇ®',
                    description: 'KFCÎßåÏùò ÎπÑÎ≤ïÏúºÎ°ú ÌäÄÍ∏¥ Î∞îÏÇ≠Ìïú ÏπòÌÇ®',
                    price: 18000,
                    category: 'chicken',
                    emoji: 'üçó',
                    image:"https://media.discordapp.net/attachments/1359511822314770515/1435846032767324191/DL_2177085_20250403134157896.png?ex=690d7352&is=690c21d2&hm=7007d4961bed1fb8b2fdf6804049f1e40b9f3f14c0177b3bd2f51b06e0f15faa&=&format=webp&quality=lossless",
                    nutrition: { calories: 320, protein: 25, fat: 18, carbs: 15 },
                    allergy: ['Î∞Ä', 'Í≥ÑÎûÄ'],
                    origin: 'Íµ≠ÎÇ¥ÏÇ∞ Îã≠Í≥†Í∏∞ 100% ÏÇ¨Ïö©'
                },
                {
                    id: 'chicken2',
                    name: 'Ìï´ ÌÅ¨Î¶¨Ïä§Ìîº ÏπòÌÇ®',
                    description: 'Îß§ÏΩ§Îã¨ÏΩ§Ìïú ÏñëÎÖêÏúºÎ°ú ÏñºÌÅ∞ÌïòÍ≤å',
                    price: 19000,
                    category: 'chicken',
                    emoji: 'üå∂Ô∏èüçó',
                    image: "https://media.discordapp.net/attachments/1359511822314770515/1435850435100672000/DL_2177088_20250403134505490.png?ex=690d776c&is=690c25ec&hm=1589678eecb829cfb2b408465bd7e1e0aab01c949237fbddc62f293527c338e6&=&format=webp&quality=lossless",
                    nutrition: { calories: 340, protein: 26, fat: 19, carbs: 18 },
                    allergy: ['Î∞Ä', 'Í≥ÑÎûÄ', 'ÎåÄÎëê'],
                    origin: 'Íµ≠ÎÇ¥ÏÇ∞ Îã≠Í≥†Í∏∞ 100% ÏÇ¨Ïö©'
                },
                {
                    id: 'chicken3',
                    name: 'Ìä∏Îü¨ÌîåÏπòÎ•¥Î•¥ ÏπòÌÇ®',
                    description: 'Î∞îÏÇ≠Ìïú ÏπòÌÇ® Ìå®Ìã∞Í∞Ä Îì§Ïñ¥Í∞Ñ Î≤ÑÍ±∞',
                    price: 6500,
                    category: 'chicken',
                    emoji: 'üçî',
                    image: "https://media.discordapp.net/attachments/1359511822314770515/1435846194352885861/DL_2177216_20250530115156557.png?ex=690d7379&is=690c21f9&hm=52719307d151e297afe442bf1d478d58a2bc70cc979c3de4656b3170ad15e1ae&=&format=webp&quality=lossless",
                    nutrition: { calories: 420, protein: 22, fat: 22, carbs: 35 },
                    allergy: ['Î∞Ä', 'Í≥ÑÎûÄ', 'Ïö∞Ïú†'],
                    origin: 'Íµ≠ÎÇ¥ÏÇ∞ Îã≠Í≥†Í∏∞ 100% ÏÇ¨Ïö©'
                }
            ],
            burger: [
                {
                    id: 'burger1',
                    name: 'ÏßïÍ±∞ Î≤ÑÍ±∞',
                    description: 'KFCÏùò ÎåÄÌëú Î≤ÑÍ±∞',
                    price: 5500,
                    category: 'burger',
                    emoji: 'üçî',
                    image: 'https://media.discordapp.net/attachments/1359511822314770515/1435837287236636682/DL_1249309_20241015170123526.png?ex=690d6b2d&is=690c19ad&hm=036053e7b264cdbc60dfb8b6360d57a047f5386ec1224ba5b28eb881122f050c&=&format=webp&quality=lossless',
                    nutrition: { calories: 380, protein: 20, fat: 18, carbs: 32 },
                    allergy: ['Î∞Ä', 'Í≥ÑÎûÄ', 'Ïö∞Ïú†'],
                    origin: 'Íµ≠ÎÇ¥ÏÇ∞ Îã≠Í≥†Í∏∞, Íµ≠ÏÇ∞ ÏñëÎ∞∞Ï∂î ÏÇ¨Ïö©'
                },
                {
                    id: 'burger2',
                    name: 'ÌÉÄÏõå Î≤ÑÍ±∞',
                    description: 'ÏπòÌÇ®, Î≤†Ïù¥Ïª®, ÏπòÏ¶àÍ∞Ä Îì§Ïñ¥Í∞Ñ ÌîÑÎ¶¨ÎØ∏ÏóÑ Î≤ÑÍ±∞',
                    price: 7500,
                    category: 'burger',
                    emoji: 'üçî',
                    image: 'https://media.discordapp.net/attachments/1359511822314770515/1435836232025509961/DL_1249430_20250403171105915.png?ex=690d6a32&is=690c18b2&hm=f7624e34af0641c4ba8ab8569dde01283b695739bb619c80eaa7f6a518d99319&=&format=webp&quality=lossless',
                    nutrition: { calories: 520, protein: 28, fat: 25, carbs: 38 },
                    allergy: ['Î∞Ä', 'Í≥ÑÎûÄ', 'Ïö∞Ïú†', 'ÎèºÏßÄÍ≥†Í∏∞'],
                    origin: 'Íµ≠ÎÇ¥ÏÇ∞ Îã≠Í≥†Í∏∞, ÏàòÏûÖÏÇ∞ Î≤†Ïù¥Ïª® ÏÇ¨Ïö©'
                },
                {
                    id: 'burger3',
                    name: 'Ïª§ÎÑ¨Îç∞Î¶¨ÏïºÎÅº',
                    description: 'ÏΩîÎÑ¨ Îç∞Î¶¨ÏïºÎÅº ÏÜåÏä§Í∞Ä Îì§Ïñ¥Í∞Ñ ÌäπÎ≥ÑÌïú Î≤ÑÍ±∞',
                    price: 6500,
                    category: 'burger',
                    emoji: 'üç§üçî',
                    image: 'https://media.discordapp.net/attachments/1359511822314770515/1435845359313096796/DL_1249339_20250109135647397_20251106_131643.png?ex=690d72b2&is=690c2132&hm=4e0589b69658bcf942e13539480634ac474c4bb1329563307c87e17881e5b7c3&=&format=webp&quality=lossless',
                    nutrition: { calories: 350, protein: 18, fat: 15, carbs: 30 },
                    allergy: ['Î∞Ä', 'Í≥ÑÎûÄ', 'Í∞ëÍ∞ÅÎ•ò'],
                    origin: 'ÏàòÏûÖÏÇ∞ ÏÉàÏö∞ ÏÇ¨Ïö©'
                }
            ],
            set: [
                {
                    id: 'set1',
                    name: 'ÏßïÍ±∞ÎçîÎ∏îÎã§Ïö¥ÌÜµÎã§Î¶¨Î∞ïÏä§',
                    description: 'ÏπòÌÇ® Î≤ÑÍ±∞ + Í∞êÏûêÌäÄÍπÄ + ÏΩúÎùº',
                    price: 8500,
                    category: 'set',
                    emoji: 'üçîüçüü•§',
                    image: 'https://media.discordapp.net/attachments/1359511822314770515/1435838178589147187/DL_2278434_20250403135922418.png?ex=690d6c02&is=690c1a82&hm=6366f269470d21f793ddd6e7392fe276fdffb3b53db540501ba4e33c1fe1b1bc&=&format=webp&quality=lossless',
                    nutrition: { calories: 680, protein: 25, fat: 28, carbs: 75 },
                    allergy: ['Î∞Ä', 'Í≥ÑÎûÄ', 'Ïö∞Ïú†'],
                    origin: 'Íµ≠ÎÇ¥ÏÇ∞ Îã≠Í≥†Í∏∞, Íµ≠ÏÇ∞ Í∞êÏûê ÏÇ¨Ïö©'
                },
                {
                    id: 'set2',
                    name: 'Í∞ìÏñëÎÖêÏºÑÏπòÎ∞•ÏßïÍ±∞Ìå©',
                    description: 'ÏßïÍ±∞ Î≤ÑÍ±∞ + Í∞êÏûêÌäÄÍπÄ + ÏΩúÎùº + ÏïôÎÖêÏπòÎ∞•',
                    price: 7500,
                    category: 'set',
                    emoji: 'üçîüçüü•§',
                    image: 'https://media.discordapp.net/attachments/1359511822314770515/1435837874967941302/DL_2278492_20250403165632519.png?ex=690d6bb9&is=690c1a39&hm=ab3be94650ee41d8275c9a618703c955300b712ff2104f8f2a1fac64cd86ca4c&=&format=webp&quality=lossless',
                    nutrition: { calories: 620, protein: 23, fat: 25, carbs: 68 },
                    allergy: ['Î∞Ä', 'Í≥ÑÎûÄ', 'Ïö∞Ïú†'],
                    origin: 'Íµ≠ÎÇ¥ÏÇ∞ Îã≠Í≥†Í∏∞, Íµ≠ÏÇ∞ Í∞êÏûê ÏÇ¨Ïö©'
                },
                {
                    id: 'set3',
                    name: 'ÏπòÌÇ® 2Ï°∞Í∞Å ÏÑ∏Ìä∏',
                    description: 'ÏπòÌÇ® 2Ï°∞Í∞Å + Í∞êÏûêÌäÄÍπÄ + ÏΩúÎùº',
                    price: 12000,
                    category: 'set',
                    emoji: 'üçóüçüü•§',
                    image: 'https://kfcapi.inicis.com/kfcs_api_img/KFCS/goods/DL_2177092_20250403142807913.png',
                    nutrition: { calories: 720, protein: 35, fat: 32, carbs: 55 },
                    allergy: ['Î∞Ä', 'Í≥ÑÎûÄ'],
                    origin: 'Íµ≠ÎÇ¥ÏÇ∞ Îã≠Í≥†Í∏∞ 100% ÏÇ¨Ïö©'
                }
            ],
            side: [
                {
                    id: 'side1',
                    name: 'Í∞êÏûêÌäÄÍπÄ',
                    description: 'Î∞îÏÇ≠Î∞îÏÇ≠Ìïú Í∞êÏûêÌäÄÍπÄ',
                    price: 2500,
                    category: 'side',
                    emoji: 'üçü',
                    image: 'https://media.discordapp.net/attachments/1359511822314770515/1435842809122000987/DL_1345856_20241015144224102.png?ex=690d7052&is=690c1ed2&hm=10db40e48c4743069d376b2c3d98810e69cfceb8824cc3e8f4388cc97c0eee58&=&format=webp&quality=lossless',
                    nutrition: { calories: 280, protein: 4, fat: 14, carbs: 35 },
                    allergy: [],
                    origin: 'Íµ≠ÏÇ∞ Í∞êÏûê ÏÇ¨Ïö©'
                },
                {
                    id: 'side2',
                    name: 'ÏπòÌÇ®ÎÑàÍ≤ü',
                    description: 'Íµ≠ÎÇ¥ÏÇ∞ Îã≠Í≥†Í∏∞ 100% ÏÇ¨Ïö©',
                    price: 3500,
                    category: 'side',
                    emoji: 'üßÄ',
                    image: 'https://media.discordapp.net/attachments/1359511822314770515/1435843960374558751/DL_2177089_20250403142917544.png?ex=690d7164&is=690c1fe4&hm=76011b3378eb79942487086bcc59bb437d5e093c3ec30a26fcda5525b13f1a37&=&format=webp&quality=lossless&width=530&height=350',
                    nutrition: { calories: 220, protein: 12, fat: 15, carbs: 10 },
                    allergy: ['Ïö∞Ïú†'],
                    origin: 'Íµ≠ÎÇ¥ÏÇ∞ Îã≠Í≥†Í∏∞ 100% ÏÇ¨Ïö©'
                },
                {
                    id: 'side3',
                    name: 'ÏñëÎÖêÏÜåÏä§',
                    description: 'KFC ÌäπÏ†ú ÏñëÎÖêÏÜåÏä§',
                    price: 500,
                    category: 'side',
                    emoji: 'ü•´',
                    image: 'https://media.discordapp.net/attachments/1359511822314770515/1435843506030645268/DL_1545437_20240708131253048.png?ex=690d70f8&is=690c1f78&hm=46279df6ac5a86ac085cac124c4fc14aedd5fcaba27cd56a236d9e02711867c5&=&format=webp&quality=lossless',
                    nutrition: { calories: 45, protein: 1, fat: 2, carbs: 6 },
                    allergy: ['ÎåÄÎëê'],
                    origin: 'Íµ≠ÎÇ¥ Ï†úÏ°∞'
                }
            ],
            drink: [
                {
                    id: 'drink1',
                    name: 'ÏΩúÎùº',
                    description: 'ÏãúÏõêÌïú ÏΩúÎùº',
                    price: 2000,
                    category: 'drink',
                    emoji: 'ü•§',
                    image: 'https://media.discordapp.net/attachments/1359511822314770515/1435842312595968000/DL_1471985_20250403145449146.png?ex=690d6fdb&is=690c1e5b&hm=24ce557e15336312241a48d377f3169e911644bad48f7b3796ae34449ba12740&=&format=webp&quality=lossless',
                    nutrition: { calories: 150, protein: 0, fat: 0, carbs: 38 },
                    allergy: [],
                    origin: 'Íµ≠ÎÇ¥ Ï†úÏ°∞'
                },
                {
                    id: 'drink2',
                    name: 'ÏÇ¨Ïù¥Îã§',
                    description: 'ÏãúÏõêÌïú ÏÇ¨Ïù¥Îã§',
                    price: 2000,
                    category: 'drink',
                    emoji: 'ü•§',
                    image: 'https://media.discordapp.net/attachments/1359511822314770515/1435842383466987633/DL_1471988_20250403145630523.png?ex=690d6fec&is=690c1e6c&hm=d9cafde3707d062a9d7f0928230302dd87b338fdd953d24db80fd2166d4c8434&=&format=webp&quality=lossless&width=530&height=350',
                    nutrition: { calories: 140, protein: 0, fat: 0, carbs: 35 },
                    allergy: [],
                    origin: 'Íµ≠ÎÇ¥ Ï†úÏ°∞'
                },
                {
                    id: 'drink3',
                    name: 'Ïò§Î†åÏßÄ Ï£ºÏä§',
                    description: 'ÏÉÅÌÅºÌïú Ïò§Î†åÏßÄ Ï£ºÏä§',
                    price: 2500,
                    category: 'drink',
                    emoji: 'üßÉ',
                    image: 'https://media.discordapp.net/attachments/1359511822314770515/1435842473854238771/DL_1471990_20250403145728251.png?ex=690d7002&is=690c1e82&hm=197c4d80e7ef62f685f1abe5df97813d22dd151c0b189b39f7d414782aee4806&=&format=webp&quality=lossless',
                    nutrition: { calories: 110, protein: 1, fat: 0, carbs: 26 },
                    allergy: [],
                    origin: 'ÏàòÏûÖÏÇ∞ Ïò§Î†åÏßÄ ÏÇ¨Ïö©'
                }
            ]
        };

        // Application State
        let currentCategory = 'all';
        let cart = [];
        let selectedDiscount = 'none';
        let currentRequest = '';
        let selectedMenuItem = null;
        let isRecording = false;
        let recognition = null;
        let currentScreen = 'home';
        let speechSynthesis = null;
        let isVoiceGuideEnabled = true;
        let selectedPaymentMethod = null;
        let pendingReceiptData = null;
        let verificationCode = null;
        let isPhoneVerified = false;
        let verificationTimer = null;
        let verificationTimeLeft = 0;

        // Fullscreen Functions
        function requestFullscreen() {
            const element = document.documentElement;
            if (element.requestFullscreen) {
                element.requestFullscreen();
            } else if (element.webkitRequestFullscreen) {
                element.webkitRequestFullscreen();
            } else if (element.mozRequestFullScreen) {
                element.mozRequestFullScreen();
            } else if (element.msRequestFullscreen) {
                element.msRequestFullscreen();
            }
        }

        // Order Type Selection
        function selectOrderType(type) {
            selectedOrderType = type;
            document.querySelectorAll('.order-type-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
            if (type === 'takeout') {
                document.getElementById('orderTypeTakeout').classList.add('selected');
                speak('Ìè¨Ïû•ÌïòÍ∏∞Î•º ÏÑ†ÌÉùÌïòÏÖ®ÏäµÎãàÎã§.');
            } else if (type === 'dinein') {
                document.getElementById('orderTypeDinein').classList.add('selected');
                speak('Îß§Ïû•ÏóêÏÑú Î®πÍ∏∞Î•º ÏÑ†ÌÉùÌïòÏÖ®ÏäµÎãàÎã§.');
            }
            
            // Ï†ÑÏ≤¥ÌôîÎ©¥ Î™®ÎìúÎ°ú Ï†ÑÌôò
            requestFullscreen();
            
            // Î∞îÎ°ú Ï£ºÎ¨∏ ÌôîÎ©¥ÏúºÎ°ú Ïù¥Îèô
            setTimeout(() => {
                showOrderScreen();
            }, 500);
        }

        // Screen Management
        function showHomeScreen() {
            stopSpeaking();
            document.getElementById('homeScreen').classList.add('active');
            document.getElementById('orderScreen').classList.remove('active');
            document.getElementById('receiptScreen').classList.remove('active');
            currentScreen = 'home';
            // Reset order type selection
            selectedOrderType = null;
            document.querySelectorAll('.order-type-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
            setTimeout(() => {
                speak('Ìôà ÌôîÎ©¥ÏûÖÎãàÎã§. Ìè¨Ïû•ÌïòÍ∏∞ ÎòêÎäî Îß§Ïû•ÏóêÏÑú Î®πÍ∏∞Î•º ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî.');
            }, 300);
        }

        function showOrderScreen() {
            stopSpeaking();
            document.getElementById('homeScreen').classList.remove('active');
            document.getElementById('orderScreen').classList.add('active');
            document.getElementById('receiptScreen').classList.remove('active');
            currentScreen = 'order';
            // Initialize order screen if needed
            if (cart.length === 0) {
                renderMenu();
            }
            setTimeout(() => {
                speak('Ï£ºÎ¨∏ ÌôîÎ©¥ÏûÖÎãàÎã§. ÏõêÌïòÎäî Î©îÎâ¥Î•º ÏÑ†ÌÉùÌïòÍ±∞ÎÇò Ïπ¥ÌÖåÍ≥†Î¶¨Î•º ÏÑ†ÌÉùÌïòÏó¨ Î©îÎâ¥Î•º ÌôïÏù∏ÌïòÏÑ∏Ïöî.');
            }, 300);
        }

        function showReceiptScreen(receiptData) {
            stopSpeaking();
            document.getElementById('homeScreen').classList.remove('active');
            document.getElementById('orderScreen').classList.remove('active');
            document.getElementById('receiptScreen').classList.add('active');
            currentScreen = 'receipt';
            
            const receiptContainer = document.getElementById('receiptContainer');
            if (!receiptContainer) return;
            
            const now = new Date();
            const dateStr = now.toLocaleDateString('ko-KR', { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric',
                weekday: 'long'
            });
            const timeStr = now.toLocaleTimeString('ko-KR', { 
                hour: '2-digit', 
                minute: '2-digit' 
            });
            const orderNumber = 'KFC-' + Date.now().toString().slice(-6);
            
            let receiptHtml = `
                <div class="receipt-header">
                    <div class="receipt-logo">KFC</div>
                    <div class="receipt-title">Ï£ºÎ¨∏ ÏòÅÏàòÏ¶ù</div>
                    <div class="receipt-subtitle">Order Receipt</div>
                </div>
                
                <div class="receipt-info">
                    <div class="receipt-info-item">
                        <span class="receipt-info-label">Ï£ºÎ¨∏ Î≤àÌò∏</span>
                        <span>${orderNumber}</span>
                    </div>
                    <div class="receipt-info-item">
                        <span class="receipt-info-label">Ï£ºÎ¨∏ ÏùºÏãú</span>
                        <span>${dateStr}</span>
                        <span>${timeStr}</span>
                    </div>
                    ${receiptData.paymentMethodName ? `
                    <div class="receipt-info-item">
                        <span class="receipt-info-label">Í≤∞Ï†ú Î∞©Ïãù</span>
                        <span>${receiptData.paymentMethodName}</span>
                    </div>
                    ` : ''}
                    ${receiptData.phoneNumber ? `
                    <div class="receipt-info-item">
                        <span class="receipt-info-label">Ïù∏Ï¶ù Ï†ÑÌôîÎ≤àÌò∏</span>
                        <span>${receiptData.phoneNumber}</span>
                    </div>
                    ` : ''}
                </div>
                
                <div class="receipt-items">
            `;
            
            receiptData.items.forEach(item => {
                receiptHtml += `
                    <div class="receipt-item">
                        <div class="receipt-item-info">
                            <div class="receipt-item-name">${item.name}</div>
                            <div class="receipt-item-details">ÏàòÎüâ: ${item.quantity}Í∞ú</div>
                            ${item.request ? `<div class="receipt-item-request">üí¨ ${item.request}</div>` : ''}
                        </div>
                        <div class="receipt-item-price">${formatPrice(item.price * item.quantity)}</div>
                    </div>
                `;
            });
            
            receiptHtml += `
                </div>
                
                <div class="receipt-divider"></div>
                
                <div class="receipt-summary">
                    <div class="receipt-summary-row">
                        <span class="receipt-summary-label">Ï£ºÎ¨∏ Í∏àÏï°</span>
                        <span class="receipt-summary-value">${formatPrice(receiptData.subtotal)}</span>
                    </div>
                    ${receiptData.discount > 0 ? `
                    <div class="receipt-summary-row discount">
                        <span class="receipt-summary-label">Ìï†Ïù∏ Í∏àÏï°</span>
                        <span class="receipt-summary-value">-${formatPrice(receiptData.discount)}</span>
                    </div>
                    ` : ''}
                    <div class="receipt-summary-row total">
                        <span class="receipt-summary-label">Ï¥ù Í≤∞Ï†ú Í∏àÏï°</span>
                        <span class="receipt-summary-value">${formatPrice(receiptData.total)}</span>
                    </div>
                </div>
                
                <div class="receipt-footer">
                    <div class="receipt-footer-message">
                        Ï£ºÎ¨∏Ïù¥ ÏôÑÎ£åÎêòÏóàÏäµÎãàÎã§.<br>
                        ${receiptData.hasRequest ? 'ÏöîÏ≤≠ÏÇ¨Ìï≠Ïù¥ ÏßÅÏõêÏóêÍ≤å Ï†ÑÎã¨ÎêòÏóàÏäµÎãàÎã§.' : ''}
                    </div>
                    <div class="receipt-footer-note">
                        Í∞êÏÇ¨Ìï©ÎãàÎã§. ÎßõÏûàÎäî ÏãùÏÇ¨ ÎêòÏÑ∏Ïöî!
                    </div>
                    <button class="btn-receipt" onclick="showHomeScreen()">
                        ÌôàÏúºÎ°ú ÎèåÏïÑÍ∞ÄÍ∏∞
                    </button>
                </div>
            `;
            
            receiptContainer.innerHTML = receiptHtml;
            
            setTimeout(() => {
                speak(`Ï£ºÎ¨∏Ïù¥ ÏôÑÎ£åÎêòÏóàÏäµÎãàÎã§. Ï£ºÎ¨∏ Î≤àÌò∏Îäî ${orderNumber}ÏûÖÎãàÎã§. ÏµúÏ¢Ö Í≤∞Ï†ú Í∏àÏï°ÏùÄ ${formatPrice(receiptData.total)}ÏûÖÎãàÎã§.`, true);
            }, 300);
        }

        // Update Cart Count
        function updateCartCount() {
            const cartCount = document.getElementById('cartCount');
            if (cartCount) {
                cartCount.textContent = cart.length;
            }
        }

        // Voice Guide Functions
        function speak(text, priority = false) {
            if (!isVoiceGuideEnabled) return;
            
            if ('speechSynthesis' in window) {
                // Í∏∞Ï°¥ ÏùåÏÑ± Ï§ëÏßÄ
                if (speechSynthesis.speaking && !priority) {
                    speechSynthesis.cancel();
                }
                
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'ko-KR';
                utterance.rate = 0.9;
                utterance.pitch = 1.0;
                utterance.volume = 0.8;
                
                speechSynthesis.speak(utterance);
            }
        }

        function stopSpeaking() {
            if ('speechSynthesis' in window) {
                speechSynthesis.cancel();
            }
        }

        // Initialize
        function init() {
            if ('speechSynthesis' in window) {
                speechSynthesis = window.speechSynthesis;
            }
            showHomeScreen();
            setupCategoryClick();
            setupVoiceRecognition();
            updateCartCount();
            
            // Ï¥àÍ∏∞ ÏùåÏÑ± ÏïàÎÇ¥
            setTimeout(() => {
                speak('KFC ÌÇ§Ïò§Ïä§ÌÅ¨Ïóê Ïò§Ïã† Í≤ÉÏùÑ ÌôòÏòÅÌï©ÎãàÎã§. Ï£ºÎ¨∏ ÏãúÏûëÌïòÍ∏∞ Î≤ÑÌäºÏùÑ ÎàåÎü¨Ï£ºÏÑ∏Ïöî.');
            }, 500);
        }

        // Setup Voice Recognition
        function setupVoiceRecognition() {
            if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
                const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                recognition = new SpeechRecognition();
                recognition.lang = 'ko-KR';
                recognition.continuous = false;
                recognition.interimResults = false;

                recognition.onresult = function(event) {
                    const transcript = event.results[0][0].transcript;
                    document.getElementById('requestInput').value = transcript;
                    currentRequest = transcript;
                    showNotification('ÏöîÏ≤≠ÏÇ¨Ìï≠Ïù¥ ÏûÖÎ†•ÎêòÏóàÏäµÎãàÎã§: ' + transcript);
                };

                recognition.onerror = function(event) {
                    console.error('Speech recognition error:', event.error);
                    showNotification('ÏùåÏÑ± Ïù∏Ïãù Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.');
                };

                recognition.onend = function() {
                    isRecording = false;
                    updateVoiceButton();
                };
            } else {
                document.getElementById('voiceBtn').style.display = 'none';
            }
        }

        // Toggle Voice Recognition
        function toggleVoiceRecognition() {
            if (!recognition) {
                showNotification('Ïù¥ Î∏åÎùºÏö∞Ï†ÄÎäî ÏùåÏÑ± Ïù∏ÏãùÏùÑ ÏßÄÏõêÌïòÏßÄ ÏïäÏäµÎãàÎã§.');
                return;
            }

            if (isRecording) {
                recognition.stop();
                isRecording = false;
            } else {
                recognition.start();
                isRecording = true;
            }
            updateVoiceButton();
        }

        // Update Voice Button
        function updateVoiceButton() {
            const btn = document.getElementById('voiceBtn');
            const text = document.getElementById('voiceBtnText');
            if (isRecording) {
                btn.classList.add('recording');
                text.textContent = 'ÏùåÏÑ± Ïù∏Ïãù Ï§ë... (Îã§Ïãú ÌÅ¥Î¶≠ÌïòÏó¨ Ï§ëÏßÄ)';
            } else {
                btn.classList.remove('recording');
                text.textContent = 'ÏùåÏÑ±ÏúºÎ°ú ÏûÖÎ†•ÌïòÍ∏∞';
            }
        }

        // Setup Category Click
        function setupCategoryClick() {
            document.querySelectorAll('.category-item').forEach(item => {
                item.addEventListener('click', function() {
                    document.querySelectorAll('.category-item').forEach(i => i.classList.remove('active'));
                    this.classList.add('active');
                    currentCategory = this.dataset.category;
                    
                    const categoryNames = {
                        'all': 'Ï†ÑÏ≤¥ Î©îÎâ¥',
                        'chicken': 'ÏπòÌÇ®',
                        'burger': 'Î≤ÑÍ±∞',
                        'set': 'ÏÑ∏Ìä∏',
                        'side': 'ÏÇ¨Ïù¥Îìú',
                        'drink': 'ÏùåÎ£å'
                    };
                    
                    const categoryName = categoryNames[currentCategory] || 'Ï†ÑÏ≤¥ Î©îÎâ¥';
                    speak(categoryName + ' Ïπ¥ÌÖåÍ≥†Î¶¨Î•º ÏÑ†ÌÉùÌïòÏÖ®ÏäµÎãàÎã§.');
                    
                    renderMenu();
                });
            });
        }

        // Render Menu
        function renderMenu() {
            const menuGrid = document.getElementById('menuGrid');
            const sectionTitle = document.getElementById('sectionTitle');
            
            if (!menuGrid || !sectionTitle) return;
            
            const categoryNames = {
                'all': 'Ï†ÑÏ≤¥ Î©îÎâ¥',
                'chicken': 'ÏπòÌÇ®',
                'burger': 'Î≤ÑÍ±∞',
                'set': 'ÏÑ∏Ìä∏',
                'side': 'ÏÇ¨Ïù¥Îìú',
                'drink': 'ÏùåÎ£å'
            };
            
            sectionTitle.textContent = categoryNames[currentCategory] || 'Ï†ÑÏ≤¥ Î©îÎâ¥';
            
            let itemsToShow = [];
            if (currentCategory === 'all') {
                Object.values(menuData).forEach(categoryItems => {
                    itemsToShow = itemsToShow.concat(categoryItems);
                });
            } else {
                itemsToShow = menuData[currentCategory] || [];
            }

            menuGrid.innerHTML = itemsToShow.map(item => `
                <div class="menu-item" onclick="showMenuDetail('${item.id}')">
                    <div class="menu-image">
                        ${item.image ? `<img src="${item.image}" alt="${item.name}" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">` : item.emoji}
                    </div>
                    <div class="menu-name">${item.name}</div>
                    <div class="menu-desc">${item.description}</div>
                    <div class="menu-price">${formatPrice(item.price)}</div>
                    <button class="btn-add" onclick="event.stopPropagation(); addToCart('${item.id}')">
                        Ïû•Î∞îÍµ¨ÎãàÏóê Ï∂îÍ∞Ä
                    </button>
                </div>
            `).join('');
        }

        // Show Menu Detail
        function showMenuDetail(itemId) {
            const item = findMenuItem(itemId);
            if (!item) return;

            selectedMenuItem = item;
            document.getElementById('modalTitle').textContent = item.name;
            document.getElementById('modalPrice').textContent = formatPrice(item.price);
            document.getElementById('modalDescription').textContent = item.description;
            const modalImage = document.getElementById('modalImage');
            if (item.image) {
                modalImage.innerHTML = `<img src="${item.image}" alt="${item.name}" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">`;
            } else {
                modalImage.textContent = item.emoji;
            }
            
            // ÏùåÏÑ± ÏïàÎÇ¥
            speak(`${item.name}Ïùò ÏÉÅÏÑ∏ Ï†ïÎ≥¥ÏûÖÎãàÎã§. Í∞ÄÍ≤©ÏùÄ ${formatPrice(item.price)}ÏûÖÎãàÎã§. ${item.description}`);
            
            // Nutrition
            const nutritionHtml = `
                <div class="nutrition-item">
                    <div class="nutrition-label">ÏπºÎ°úÎ¶¨</div>
                    <div class="nutrition-value">${item.nutrition.calories} kcal</div>
                </div>
                <div class="nutrition-item">
                    <div class="nutrition-label">Îã®Î∞±Ïßà</div>
                    <div class="nutrition-value">${item.nutrition.protein} g</div>
                </div>
                <div class="nutrition-item">
                    <div class="nutrition-label">ÏßÄÎ∞©</div>
                    <div class="nutrition-value">${item.nutrition.fat} g</div>
                </div>
                <div class="nutrition-item">
                    <div class="nutrition-label">ÌÉÑÏàòÌôîÎ¨º</div>
                    <div class="nutrition-value">${item.nutrition.carbs} g</div>
                </div>
            `;
            document.getElementById('modalNutrition').innerHTML = nutritionHtml;
            
            // Allergy
            const allergyHtml = item.allergy.length > 0
                ? item.allergy.map(a => `<span class="allergy-tag">${a}</span>`).join('')
                : '<span class="allergy-tag">ÏóÜÏùå</span>';
            document.getElementById('modalAllergy').innerHTML = allergyHtml;
            
            // Origin
            document.getElementById('modalOrigin').textContent = item.origin;
            
            document.getElementById('menuModal').classList.add('active');
        }

        // Close Modal
        function closeModal() {
            document.getElementById('menuModal').classList.remove('active');
            selectedMenuItem = null;
        }

        // Add from Modal
        function addFromModal() {
            if (selectedMenuItem) {
                addToCart(selectedMenuItem.id);
                closeModal();
            }
        }

        // Find Menu Item
        function findMenuItem(itemId) {
            for (const category of Object.values(menuData)) {
                const item = category.find(i => i.id === itemId);
                if (item) return item;
            }
            return null;
        }

        // Add to Cart
        function addToCart(itemId) {
            const item = findMenuItem(itemId);
            if (!item) return;

            const requestInput = document.getElementById('requestInput');
            const request = requestInput ? requestInput.value.trim() : '';
            const requestKey = request || '';

            // Í∞ôÏùÄ Î©îÎâ¥ IDÏôÄ Í∞ôÏùÄ ÏöîÏ≤≠ÏÇ¨Ìï≠ÏùÑ Í∞ÄÏßÑ Ìï≠Î™©Ïù¥ ÏûàÎäîÏßÄ ÌôïÏù∏
            const existingItem = cart.find(cartItem => 
                cartItem.id === itemId && cartItem.request === requestKey
            );

            if (existingItem) {
                // Í∏∞Ï°¥ Ìï≠Î™©Ïùò ÏàòÎüâ Ï¶ùÍ∞Ä
                existingItem.quantity += 1;
                showNotification(`${item.name} ÏàòÎüâÏù¥ Ï¶ùÍ∞ÄÌñàÏäµÎãàÎã§. (${existingItem.quantity}Í∞ú)`);
                speak(`${item.name} ÏàòÎüâÏù¥ ${existingItem.quantity}Í∞úÎ°ú Ï¶ùÍ∞ÄÌñàÏäµÎãàÎã§.`);
            } else {
                // ÏÉàÎ°úÏö¥ Ìï≠Î™© Ï∂îÍ∞Ä
                const cartItem = {
                    ...item,
                    cartId: Date.now(),
                    quantity: 1,
                    request: requestKey
                };

                cart.push(cartItem);
                showNotification(`${item.name}Ïù¥(Í∞Ä) Ïû•Î∞îÍµ¨ÎãàÏóê Ï∂îÍ∞ÄÎêòÏóàÏäµÎãàÎã§.`);
                speak(`${item.name}Ïù¥ Ïû•Î∞îÍµ¨ÎãàÏóê Ï∂îÍ∞ÄÎêòÏóàÏäµÎãàÎã§.`);
            }

            // ÏöîÏ≤≠ÏÇ¨Ìï≠ ÏûÖÎ†• ÌïÑÎìú Ï¥àÍ∏∞Ìôî
            if (requestInput) {
                requestInput.value = '';
            }
            currentRequest = '';
            
            updateCart();
            updateCartCount();
        }

        // Remove from Cart
        function removeFromCart(cartId) {
            cart = cart.filter(item => item.cartId !== cartId);
            updateCart();
            updateCartCount();
            showNotification('Ìï≠Î™©Ïù¥ Ïû•Î∞îÍµ¨ÎãàÏóêÏÑú Ï†úÍ±∞ÎêòÏóàÏäµÎãàÎã§.');
        }

        // Update Quantity
        function updateQuantity(cartId, delta) {
            const item = cart.find(i => i.cartId === cartId);
            if (item) {
                item.quantity = Math.max(1, item.quantity + delta);
                updateCart();
                updateCartCount();
            }
        }

        // Update Cart
        function updateCart() {
            const cartItems = document.getElementById('cartItems');
            const checkoutBtn = document.getElementById('checkoutBtn');

            updateCartCount();
            
            if (checkoutBtn) {
                checkoutBtn.disabled = cart.length === 0;
            }

            if (cart.length === 0) {
                cartItems.innerHTML = `
                    <div class="empty-cart">
                        <div class="empty-cart-icon">üõí</div>
                        <div class="empty-cart-text">Ïû•Î∞îÍµ¨ÎãàÍ∞Ä ÎπÑÏñ¥ÏûàÏäµÎãàÎã§</div>
                    </div>
                `;
            } else {
                cartItems.innerHTML = cart.map(item => `
                    <div class="cart-item">
                        <div class="cart-item-header">
                            <div class="cart-item-name">${item.name}</div>
                            <button class="cart-item-remove" onclick="removeFromCart(${item.cartId})">√ó</button>
                        </div>
                        ${item.request ? `<div class="cart-item-request">üí¨ ${item.request}</div>` : ''}
                        <div class="cart-item-controls">
                            <div class="quantity-controls">
                                <button class="btn-quantity" onclick="updateQuantity(${item.cartId}, -1)">‚àí</button>
                                <span class="quantity">${item.quantity}</span>
                                <button class="btn-quantity" onclick="updateQuantity(${item.cartId}, 1)">+</button>
                            </div>
                            <div class="cart-item-price">${formatPrice(item.price * item.quantity)}</div>
                        </div>
                    </div>
                `).join('');
            }

            updateTotal();
        }

        // Update Total
        function updateTotal() {
            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            let discount = 0;

            if (selectedDiscount === 'student') {
                discount = subtotal * 0.1;
            } else if (selectedDiscount === 'coupon1') {
                discount = subtotal * 0.05;
            } else if (selectedDiscount === 'coupon2') {
                discount = 3000;
            }

            const total = subtotal - discount;

            document.getElementById('subtotal').textContent = formatPrice(subtotal);
            document.getElementById('discountAmount').textContent = formatPrice(-discount);
            document.getElementById('totalAmount').textContent = formatPrice(total);
        }

        // Select Discount
        function selectDiscount(discountType) {
            selectedDiscount = discountType;
            document.querySelectorAll('.discount-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            const selectedOption = document.querySelector(`[data-discount="${discountType}"]`);
            if (selectedOption) {
                selectedOption.classList.add('selected');
            }
            updateTotal();
            
            const discountNames = {
                'none': 'Ìï†Ïù∏ ÏóÜÏùå',
                'student': 'ÌïôÏÉù Ìï†Ïù∏ 10ÌçºÏÑºÌä∏',
                'coupon1': 'ÌÜµÏã†ÏÇ¨ Ìï†Ïù∏ 5ÌçºÏÑºÌä∏',
                'coupon2': 'ÌîÑÎ°úÎ™®ÏÖò Ïø†Ìè∞ 3Ï≤úÏõê'
            };
            
            if (discountType !== 'none') {
                showNotification('Ìï†Ïù∏Ïù¥ Ï†ÅÏö©ÎêòÏóàÏäµÎãàÎã§.');
                speak(discountNames[discountType] + 'Ïù¥ Ï†ÅÏö©ÎêòÏóàÏäµÎãàÎã§.');
            } else {
                speak('Ìï†Ïù∏Ïù¥ Ìï¥Ï†úÎêòÏóàÏäµÎãàÎã§.');
            }
        }

        // Format Price
        function formatPrice(price) {
            return new Intl.NumberFormat('ko-KR').format(price) + 'Ïõê';
        }

        // Show Notification
        function showNotification(message) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.classList.add('active');
            setTimeout(() => {
                notification.classList.remove('active');
            }, 3000);
        }

        // Scroll to Cart
        function scrollToCart() {
            const rightSidebar = document.querySelector('.right-sidebar');
            const cartSection = document.querySelector('.cart-section');
            if (rightSidebar && cartSection) {
                // right-sidebar ÎÇ¥Î∂ÄÏóêÏÑúÎßå Ïä§ÌÅ¨Î°§ (ÌéòÏù¥ÏßÄ Ï†ÑÏ≤¥ Ïä§ÌÅ¨Î°§ Î∞©ÏßÄ)
                const sidebarTop = rightSidebar.scrollTop;
                const cartTop = cartSection.offsetTop;
                
                rightSidebar.scrollTo({
                    top: cartTop - 20, // ÏïΩÍ∞ÑÏùò Ïó¨Î∞±
                    behavior: 'smooth'
                });
                
                speak('Ïû•Î∞îÍµ¨ÎãàÎ°ú Ïù¥ÎèôÌñàÏäµÎãàÎã§. ÌòÑÏû¨ Ïû•Î∞îÍµ¨ÎãàÏóê ' + cart.length + 'Í∞úÏùò Ìï≠Î™©Ïù¥ ÏûàÏäµÎãàÎã§.');
            } else if (rightSidebar) {
                // right-sidebar ÏÉÅÎã®ÏúºÎ°ú Ïä§ÌÅ¨Î°§
                rightSidebar.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            }
        }

        // Phone Number Formatting
        function formatPhoneNumber(value) {
            const numbers = value.replace(/[^\d]/g, '');
            if (numbers.length <= 3) return numbers;
            if (numbers.length <= 7) return numbers.slice(0, 3) + '-' + numbers.slice(3);
            return numbers.slice(0, 3) + '-' + numbers.slice(3, 7) + '-' + numbers.slice(7, 11);
        }

        // Phone Input Event Listener
        const phoneInput = document.getElementById('phoneInput');
        if (phoneInput) {
            phoneInput.addEventListener('input', function(e) {
                e.target.value = formatPhoneNumber(e.target.value);
            });
        }

        // Send Verification Code
        async function sendVerificationCode() {
            const phoneInput = document.getElementById('phoneInput');
            const btnSendCode = document.getElementById('btnSendCode');
            const verificationCodeInput = document.getElementById('verificationCodeInput');
            const verificationStatus = document.getElementById('verificationStatus');
            
            if (!phoneInput || !btnSendCode) return;
            
            const phoneNumber = phoneInput.value.replace(/[^\d]/g, '');
            
            // Ï†ÑÌôîÎ≤àÌò∏ Ïú†Ìö®ÏÑ± Í≤ÄÏÇ¨
            if (phoneNumber.length !== 11 || !phoneNumber.startsWith('010')) {
                if (verificationStatus) {
                    verificationStatus.textContent = 'Ïò¨Î∞îÎ•∏ Ìú¥ÎåÄÌè∞ Î≤àÌò∏Î•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî. (010-XXXX-XXXX)';
                    verificationStatus.className = 'verification-status error';
                    verificationStatus.style.display = 'block';
                }
                speak('Ïò¨Î∞îÎ•∏ Ìú¥ÎåÄÌè∞ Î≤àÌò∏Î•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.');
                return;
            }
            
            // Î≤ÑÌäº ÎπÑÌôúÏÑ±Ìôî Î∞è Î°úÎî© ÏÉÅÌÉú
            btnSendCode.disabled = true;
            const originalText = btnSendCode.textContent;
            btnSendCode.textContent = 'Ï†ÑÏÜ° Ï§ë...';
            
            // ÏÉÅÌÉú Î©îÏãúÏßÄ - Ï†ÑÏÜ° Ï§ë
            if (verificationStatus) {
                verificationStatus.textContent = 'Ïù∏Ï¶ùÎ≤àÌò∏Î•º Ï†ÑÏÜ°ÌïòÍ≥† ÏûàÏäµÎãàÎã§...';
                verificationStatus.className = 'verification-status pending';
                verificationStatus.style.display = 'block';
            }
            
            speak('Ïù∏Ï¶ùÎ≤àÌò∏Î•º Ï†ÑÏÜ°ÌïòÍ≥† ÏûàÏäµÎãàÎã§.');
            
            try {
                // Ïã§Ï†ú SMS Ï†ÑÏÜ° ÏãúÎÆ¨Î†àÏù¥ÏÖò (1-2Ï¥à ÎåÄÍ∏∞)
                await new Promise(resolve => setTimeout(resolve, 1500));
                
                // Ïã§Ï†ú SMS API Ìò∏Ï∂ú (Ïã§Ï†ú ÏÇ¨Ïö© Ïãú Ï£ºÏÑù Ìï¥Ï†ú)
                // const response = await sendSMS(phoneNumber);
                
                // Ïù∏Ï¶ùÎ≤àÌò∏ ÏÉùÏÑ± (6ÏûêÎ¶¨)
                verificationCode = Math.floor(100000 + Math.random() * 900000).toString();
                isPhoneVerified = false;
                
                // Ïã§Ï†ú SMS Ï†ÑÏÜ° API Ìò∏Ï∂ú ÏòàÏãú
                // Ïã§Ï†ú Ïó∞Îèô Ïãú ÏïÑÎûò Ï£ºÏÑùÏùÑ Ìï¥Ï†úÌïòÍ≥† API ÏóîÎìúÌè¨Ïù∏Ìä∏Î•º ÏÑ§Ï†ïÌïòÏÑ∏Ïöî
                /*
                try {
                    const response = await fetch('YOUR_SMS_API_ENDPOINT', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': 'Bearer YOUR_API_KEY'
                        },
                        body: JSON.stringify({
                            to: phoneNumber,
                            message: `[KFC ÌÇ§Ïò§Ïä§ÌÅ¨] Ïù∏Ï¶ùÎ≤àÌò∏Îäî ${verificationCode}ÏûÖÎãàÎã§.`
                        })
                    });
                    
                    if (!response.ok) {
                        throw new Error('SMS Ï†ÑÏÜ° Ïã§Ìå®');
                    }
                } catch (error) {
                    console.error('SMS Ï†ÑÏÜ° Ïò§Î•ò:', error);
                    if (verificationStatus) {
                        verificationStatus.textContent = 'SMS Ï†ÑÏÜ°Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§. Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.';
                        verificationStatus.className = 'verification-status error';
                        verificationStatus.style.display = 'block';
                    }
                    speak('SMS Ï†ÑÏÜ°Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.');
                    btnSendCode.textContent = originalText;
                    btnSendCode.disabled = false;
                    return;
                }
                */
                
                // Ïù∏Ï¶ùÎ≤àÌò∏ ÏûÖÎ†• ÌïÑÎìú ÌôúÏÑ±Ìôî
                if (verificationCodeInput) {
                    verificationCodeInput.disabled = false;
                    verificationCodeInput.value = '';
                    verificationCodeInput.focus();
                }
                
                // ÏÉÅÌÉú Î©îÏãúÏßÄ - Ï†ÑÏÜ° ÏôÑÎ£å
                if (verificationStatus) {
                    verificationStatus.textContent = `Ïù∏Ï¶ùÎ≤àÌò∏Í∞Ä Ï†ÑÏÜ°ÎêòÏóàÏäµÎãàÎã§. SMSÎ•º ÌôïÏù∏Ìï¥Ï£ºÏÑ∏Ïöî. (ÌÖåÏä§Ìä∏Ïö©: ${verificationCode})`;
                    verificationStatus.className = 'verification-status success';
                    verificationStatus.style.display = 'block';
                }
                
                // ÌÉÄÏù¥Î®∏ ÏãúÏûë (3Î∂Ñ)
                verificationTimeLeft = 180;
                const timerElement = document.getElementById('verificationTimer');
                if (timerElement) {
                    timerElement.style.display = 'block';
                    timerElement.style.color = '#666666';
                }
                
                startVerificationTimer();
                
                speak('Ïù∏Ï¶ùÎ≤àÌò∏Í∞Ä Ï†ÑÏÜ°ÎêòÏóàÏäµÎãàÎã§. SMSÎ•º ÌôïÏù∏ÌïòÍ≥† Ïù∏Ï¶ùÎ≤àÌò∏Î•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.');
                
                // Î≤ÑÌäº ÌÖçÏä§Ìä∏ Î≥µÏõê
                btnSendCode.textContent = originalText;
                
                // 3Ï¥à ÌõÑ Î≤ÑÌäº Ïû¨ÌôúÏÑ±Ìôî (Ïû¨Ï†ÑÏÜ° Í∞ÄÎä•)
                setTimeout(() => {
                    btnSendCode.disabled = false;
                }, 3000);
                
            } catch (error) {
                console.error('Ïù∏Ï¶ùÎ≤àÌò∏ Ï†ÑÏÜ° Ïò§Î•ò:', error);
                if (verificationStatus) {
                    verificationStatus.textContent = 'Ïù∏Ï¶ùÎ≤àÌò∏ Ï†ÑÏÜ°Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§. Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.';
                    verificationStatus.className = 'verification-status error';
                    verificationStatus.style.display = 'block';
                }
                speak('Ïù∏Ï¶ùÎ≤àÌò∏ Ï†ÑÏÜ°Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.');
                btnSendCode.textContent = originalText;
                btnSendCode.disabled = false;
            }
        }
        
        // Ïã§Ï†ú SMS Ï†ÑÏÜ° Ìï®Ïàò (Ïã§Ï†ú API Ïó∞Îèô Ïãú ÏÇ¨Ïö©)
        async function sendSMS(phoneNumber, code) {
            // Ïã§Ï†ú SMS API Ïó∞Îèô ÏòàÏãú
            // Ïòà: CoolSMS, Twilio, ÏïåÎ¶¨Í≥† Îì±
            /*
            const response = await fetch('https://api.coolsms.co.kr/messages/v4/send', {
                method: 'POST',
                headers: {
                    'Authorization': 'HMAC-SHA256 apiKey=YOUR_API_KEY, date=DATE, salt=SALT, signature=SIGNATURE',
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    message: {
                        to: phoneNumber,
                        from: 'YOUR_SENDER_NUMBER',
                        text: `[KFC ÌÇ§Ïò§Ïä§ÌÅ¨] Ïù∏Ï¶ùÎ≤àÌò∏Îäî ${code}ÏûÖÎãàÎã§.`
                    }
                })
            });
            return response.json();
            */
        }

        // Start Verification Timer
        function startVerificationTimer() {
            if (verificationTimer) {
                clearInterval(verificationTimer);
            }
            
            verificationTimer = setInterval(() => {
                verificationTimeLeft--;
                const timerElement = document.getElementById('verificationTimer');
                if (timerElement) {
                    const minutes = Math.floor(verificationTimeLeft / 60);
                    const seconds = verificationTimeLeft % 60;
                    timerElement.textContent = `Ïù∏Ï¶ùÎ≤àÌò∏ Ïú†Ìö®ÏãúÍ∞Ñ: ${minutes}:${seconds.toString().padStart(2, '0')}`;
                    
                    if (verificationTimeLeft <= 0) {
                        clearInterval(verificationTimer);
                        timerElement.textContent = 'Ïù∏Ï¶ùÎ≤àÌò∏Í∞Ä ÎßåÎ£åÎêòÏóàÏäµÎãàÎã§. Îã§Ïãú Ï†ÑÏÜ°Ìï¥Ï£ºÏÑ∏Ïöî.';
                        timerElement.style.color = '#C62828';
                        verificationCode = null;
                        const verificationCodeInput = document.getElementById('verificationCodeInput');
                        if (verificationCodeInput) {
                            verificationCodeInput.disabled = true;
                            verificationCodeInput.value = '';
                        }
                        isPhoneVerified = false;
                        updatePaymentButtonState();
                    }
                }
            }, 1000);
        }

        // Verify Code
        function verifyCode() {
            const verificationCodeInput = document.getElementById('verificationCodeInput');
            const verificationStatus = document.getElementById('verificationStatus');
            
            if (!verificationCodeInput || !verificationCode) return;
            
            const inputCode = verificationCodeInput.value;
            
            if (inputCode.length !== 6) {
                return;
            }
            
            if (inputCode === verificationCode) {
                isPhoneVerified = true;
                if (verificationStatus) {
                    verificationStatus.textContent = 'Ïù∏Ï¶ùÏù¥ ÏôÑÎ£åÎêòÏóàÏäµÎãàÎã§.';
                    verificationStatus.className = 'verification-status success';
                    verificationStatus.style.display = 'block';
                }
                if (verificationTimer) {
                    clearInterval(verificationTimer);
                }
                const timerElement = document.getElementById('verificationTimer');
                if (timerElement) {
                    timerElement.style.display = 'none';
                }
                speak('Ï†ÑÌôîÎ≤àÌò∏ Ïù∏Ï¶ùÏù¥ ÏôÑÎ£åÎêòÏóàÏäµÎãàÎã§.');
                updatePaymentButtonState();
            } else {
                if (verificationStatus) {
                    verificationStatus.textContent = 'Ïù∏Ï¶ùÎ≤àÌò∏Í∞Ä ÏùºÏπòÌïòÏßÄ ÏïäÏäµÎãàÎã§. Îã§Ïãú ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.';
                    verificationStatus.className = 'verification-status error';
                    verificationStatus.style.display = 'block';
                }
                speak('Ïù∏Ï¶ùÎ≤àÌò∏Í∞Ä ÏùºÏπòÌïòÏßÄ ÏïäÏäµÎãàÎã§.');
            }
        }

        // Verification Code Input Event Listener
        const verificationCodeInput = document.getElementById('verificationCodeInput');
        if (verificationCodeInput) {
            verificationCodeInput.addEventListener('input', function(e) {
                e.target.value = e.target.value.replace(/[^\d]/g, '');
                if (e.target.value.length === 6) {
                    verifyCode();
                }
            });
        }

        // Update Payment Button State
        function updatePaymentButtonState() {
            const confirmBtn = document.getElementById('btnPaymentConfirm');
            if (confirmBtn) {
                confirmBtn.disabled = !(selectedPaymentMethod && isPhoneVerified);
            }
        }

        // Payment Method Selection
        function selectPaymentMethod(method) {
            selectedPaymentMethod = method;
            document.querySelectorAll('.payment-method-item').forEach(item => {
                item.classList.remove('selected');
            });
            const selectedItem = document.querySelector(`[data-payment="${method}"]`);
            if (selectedItem) {
                selectedItem.classList.add('selected');
            }
            
            const paymentNames = {
                'kakaopay': 'Ïπ¥Ïπ¥Ïò§ÌéòÏù¥',
                'naverpay': 'ÎÑ§Ïù¥Î≤ÑÌéòÏù¥',
                'card': 'Ïã†Ïö©Ïπ¥Îìú'
            };
            speak(paymentNames[method] + 'Î•º ÏÑ†ÌÉùÌïòÏÖ®ÏäµÎãàÎã§.');
            updatePaymentButtonState();
        }

        // Show Payment Modal
        function showPaymentModal() {
            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            let discount = 0;

            if (selectedDiscount === 'student') {
                discount = total * 0.1;
            } else if (selectedDiscount === 'coupon1') {
                discount = total * 0.05;
            } else if (selectedDiscount === 'coupon2') {
                discount = 3000;
            }

            const finalTotal = total - discount;
            
            document.getElementById('paymentModalTotal').textContent = `Ï¥ù Í≤∞Ï†ú Í∏àÏï°: ${formatPrice(finalTotal)}`;
            
            // Reset payment state
            selectedPaymentMethod = null;
            isPhoneVerified = false;
            verificationCode = null;
            verificationTimeLeft = 0;
            if (verificationTimer) {
                clearInterval(verificationTimer);
                verificationTimer = null;
            }
            
            // Reset UI
            document.querySelectorAll('.payment-method-item').forEach(item => {
                item.classList.remove('selected');
            });
            
            const phoneInput = document.getElementById('phoneInput');
            const verificationCodeInput = document.getElementById('verificationCodeInput');
            const verificationStatus = document.getElementById('verificationStatus');
            const verificationTimerElement = document.getElementById('verificationTimer');
            const btnSendCode = document.getElementById('btnSendCode');
            
            if (phoneInput) phoneInput.value = '';
            if (verificationCodeInput) {
                verificationCodeInput.value = '';
                verificationCodeInput.disabled = true;
            }
            if (verificationStatus) {
                verificationStatus.style.display = 'none';
                verificationStatus.className = 'verification-status';
            }
            if (verificationTimerElement) {
                verificationTimerElement.style.display = 'none';
                verificationTimerElement.textContent = '';
            }
            if (btnSendCode) btnSendCode.disabled = false;
            
            const confirmBtn = document.getElementById('btnPaymentConfirm');
            if (confirmBtn) {
                confirmBtn.disabled = true;
            }
            
            document.getElementById('paymentModal').classList.add('active');
            speak('Ï†ÑÌôîÎ≤àÌò∏ Ïù∏Ï¶ùÏùÑ ÏßÑÌñâÌï¥Ï£ºÏÑ∏Ïöî.');
        }

        // Close Payment Modal
        function closePaymentModal() {
            document.getElementById('paymentModal').classList.remove('active');
            selectedPaymentMethod = null;
            isPhoneVerified = false;
            verificationCode = null;
            if (verificationTimer) {
                clearInterval(verificationTimer);
                verificationTimer = null;
            }
            speak('Í≤∞Ï†úÍ∞Ä Ï∑®ÏÜåÎêòÏóàÏäµÎãàÎã§.');
        }

        // Confirm Payment
        function confirmPayment() {
            if (!selectedPaymentMethod) {
                showNotification('Í≤∞Ï†ú Î∞©ÏãùÏùÑ ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî.');
                speak('Í≤∞Ï†ú Î∞©ÏãùÏùÑ ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî.');
                return;
            }

            if (!isPhoneVerified) {
                showNotification('Ï†ÑÌôîÎ≤àÌò∏ Ïù∏Ï¶ùÏùÑ ÏôÑÎ£åÌï¥Ï£ºÏÑ∏Ïöî.');
                speak('Ï†ÑÌôîÎ≤àÌò∏ Ïù∏Ï¶ùÏùÑ ÏôÑÎ£åÌï¥Ï£ºÏÑ∏Ïöî.');
                return;
            }

            closePaymentModal();
            
            // Í≤∞Ï†ú Ï≤òÎ¶¨ ÏãúÎÆ¨Î†àÏù¥ÏÖò
            const paymentNames = {
                'kakaopay': 'Ïπ¥Ïπ¥Ïò§ÌéòÏù¥',
                'naverpay': 'ÎÑ§Ïù¥Î≤ÑÌéòÏù¥',
                'card': 'Ïã†Ïö©Ïπ¥Îìú'
            };
            
            showNotification(`${paymentNames[selectedPaymentMethod]}Î°ú Í≤∞Ï†úÎ•º ÏßÑÌñâÌï©ÎãàÎã§...`);
            speak(`${paymentNames[selectedPaymentMethod]}Î°ú Í≤∞Ï†úÎ•º ÏßÑÌñâÌï©ÎãàÎã§.`);
            
            // Reset cart and settings BEFORE showing receipt
            if (pendingReceiptData) {
                const requestInput = document.getElementById('requestInput');
                cart = [];
                selectedDiscount = 'none';
                if (requestInput) {
                    requestInput.value = '';
                }
                currentRequest = '';
                const discountOptions = document.querySelectorAll('.discount-option');
                discountOptions.forEach(opt => {
                    opt.classList.remove('selected');
                });
                const noneOption = document.querySelector('[data-discount="none"]');
                if (noneOption) {
                    noneOption.classList.add('selected');
                }
                updateCart();
                renderMenu();
                
                // Ïã§Ï†ú Í≤∞Ï†ú Ï≤òÎ¶¨ ÌõÑ ÏòÅÏàòÏ¶ù ÌëúÏãú
                setTimeout(() => {
                    pendingReceiptData.paymentMethod = selectedPaymentMethod;
                    pendingReceiptData.paymentMethodName = paymentNames[selectedPaymentMethod];
                    showReceiptScreen(pendingReceiptData);
                    pendingReceiptData = null;
                    selectedPaymentMethod = null;
                }, 1000);
            }
        }

        // Checkout
        function checkout() {
            try {
                if (cart.length === 0) {
                    showNotification('Ïû•Î∞îÍµ¨ÎãàÍ∞Ä ÎπÑÏñ¥ÏûàÏäµÎãàÎã§.');
                    speak('Ïû•Î∞îÍµ¨ÎãàÍ∞Ä ÎπÑÏñ¥ÏûàÏäµÎãàÎã§. Î©îÎâ¥Î•º Ï∂îÍ∞ÄÌï¥Ï£ºÏÑ∏Ïöî.');
                    return;
                }

                const requestInput = document.getElementById('requestInput');
                const request = requestInput ? requestInput.value.trim() : '';
                if (request) {
                    // Apply request to last item if there's a request in input
                    if (cart.length > 0) {
                        cart[cart.length - 1].request = request;
                    }
                }

                const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
                let discount = 0;

                if (selectedDiscount === 'student') {
                    discount = total * 0.1;
                } else if (selectedDiscount === 'coupon1') {
                    discount = total * 0.05;
                } else if (selectedDiscount === 'coupon2') {
                    discount = 3000;
                }

                const finalTotal = total - discount;
                
                // Check if there are any requests
                const hasRequest = cart.some(item => item.request) || request;

                // Prepare receipt data (but don't reset cart yet)
                pendingReceiptData = {
                    items: cart.map(item => ({
                        name: item.name,
                        quantity: item.quantity,
                        price: item.price,
                        request: item.request
                    })),
                    subtotal: total,
                    discount: discount,
                    total: finalTotal,
                    hasRequest: hasRequest
                };

                // Show payment method selection modal
                showPaymentModal();
            } catch (error) {
                console.error('Checkout error:', error);
                showNotification('Ï£ºÎ¨∏ Ï≤òÎ¶¨ Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.');
            }
        }

        // Request Input Change
        const requestInput = document.getElementById('requestInput');
        if (requestInput) {
            requestInput.addEventListener('input', function(e) {
                currentRequest = e.target.value;
            });
        }

        // Close modal on outside click
        const menuModal = document.getElementById('menuModal');
        if (menuModal) {
            menuModal.addEventListener('click', function(e) {
                if (e.target === this) {
                    closeModal();
                }
            });
        }

        // Close payment modal on outside click
        const paymentModal = document.getElementById('paymentModal');
        if (paymentModal) {
            paymentModal.addEventListener('click', function(e) {
                if (e.target === this) {
                    closePaymentModal();
                }
            });
        }

        // Initialize on load
        init();
    </script>
</body>
</html>

